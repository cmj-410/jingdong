{"version":3,"sources":["webpack:///./src/effects/addressEffect.js","webpack:///./src/views/upsertAddress/UpsertAddress.vue?0877","webpack:///./src/views/upsertAddress/UpsertAddress.vue","webpack:///./src/views/upsertAddress/UpsertAddress.vue?c77a"],"names":["useCommonAddressEffect","store","useStore","getAddressList","forceUpdate","addressList","state","length","get","result","data","commit","class","_createElementVNode","_createElementBlock","onClick","$setup","_toDisplayString","_hoisted_6","placeholder","city","$event","_hoisted_8","department","_hoisted_10","houseNumber","_hoisted_12","name","_hoisted_14","phone","useAddressEffect","toRefs","useFormEffect","addressId","router","useRouter","formData","reactive","getAddressItem","errno","upsertAddress","patch","back","post","setup","route","useRoute","params","id","handleBackClick","__exports__","render"],"mappings":"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","file":"js/upsertAddress.a6145d94.js","sourcesContent":["import { useStore } from 'vuex'\nimport { get } from '../utils/request'\n\nconst useCommonAddressEffect = () => {\n  const store = useStore()\n\n  const getAddressList = async (forceUpdate) => {\n    const addressList = store.state.addressList;\n    if(forceUpdate || !addressList.length) {\n      const result = await get('/api/user/address')\n      if(result?.data?.length) {\n        store.commit('changeAddressList', result.data)\n      }\n    }\n  }\n\n  return { getAddressList }\n}\n\nexport default useCommonAddressEffect","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UpsertAddress.vue?vue&type=style&index=0&id=46f86bf1&lang=scss&scoped=true\"","<template>\n  <div class=\"wrapper\">\n    <div class=\"title\">\n      <div\n        class=\"iconfont title__back\"\n        @click=\"handleBackClick\"\n      >&#xe6f2;</div>\n      <div class=\"title__text\">\n        {{addressId ? '编辑收货地址': '新建收货地址'}}\n      </div>\n      <div class=\"title__save\" @click=\"upsertAddress\">保存</div>\n    </div>\n    <div class=\"form\">\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">所在城市:</div>\n        <input class=\"form__item__content\" placeholder=\"如北京市\" v-model=\"formData.city\" />\n      </div>\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">小区/大厦/学校:</div>\n        <input class=\"form__item__content\" placeholder=\"如理工大学国防科技园\" v-model=\"formData.department\" />\n      </div>\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">楼号-门牌号:</div>\n        <input class=\"form__item__content\" placeholder=\"A号楼B层\" v-model=\"formData.houseNumber\" />\n      </div>\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">收货人:</div>\n        <input class=\"form__item__content\" placeholder=\"请填写收货人的姓名\" v-model=\"formData.name\" />\n      </div>\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">联系电话:</div>\n        <input class=\"form__item__content\" placeholder=\"请填写收货手机号\" v-model=\"formData.phone\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { toRefs, reactive } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter, useRoute } from 'vue-router'\nimport { post, get, patch } from '../../utils/request'\nimport useCommonAddressEffect from '../../effects/addressEffect'\n\nconst useAddressEffect = () => {\n  const store = useStore()\n  const { addressList } = toRefs(store.state)\n  const { getAddressList } = useCommonAddressEffect()\n  getAddressList()\n  return { addressList }\n}\n\nconst useFormEffect = (addressId) => {\n  const router = useRouter()\n  const formData = reactive({\n    city: '', department: '', houseNumber: '', name: '', phone: ''\n  })\n  const getAddressItem = async () => {\n    const result = await get(`/api/user/address/${addressId}`)\n    if(result?.errno === 0 && result?.data) {\n      const { city, department, houseNumber, name, phone } = result.data;\n      formData.city = city\n      formData.department = department\n      formData.houseNumber = houseNumber\n      formData.name = name\n      formData.phone = phone\n    }\n  }\n  const upsertAddress = async () => {\n    if(addressId) {\n      const result = await patch(`/api/user/address/${addressId}`, {\n        data: formData\n      })\n      if (result?.errno === 0) { router.back() } \n    }else {\n      const result = await post('/api/user/address', {\n        data: formData\n      })\n      if (result?.errno === 0) { router.back() } \n    }\n  }\n  if(addressId) { getAddressItem() }\n  return { formData, upsertAddress }\n}\n\nexport default {\n  name: 'MyAddressList',\n  setup() {\n    const router = useRouter()\n    const route = useRoute()\n    const addressId = route?.params?.id\n    const { addressList } = useAddressEffect()\n    const { formData, upsertAddress } = useFormEffect(addressId)\n    const handleBackClick = () => { router.back() }\n    return { addressId, addressList, formData, handleBackClick, upsertAddress }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../style/viriables.scss';\n.wrapper {\n  overflow-y: auto;\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: $dark-bgColor;\n}\n.title {\n  display: flex;\n  line-height: .44rem;\n  background: $bgColor;\n  font-size: .16rem;\n  color: $content-fontcolor;\n  text-align: center;\n  &__back {\n    width: .2rem;\n    margin-left: .18rem;\n    font-size: .2rem;\n    color: $search-fontColor;\n  }\n  &__text {\n    flex: 1;\n    text-align: center;\n  }\n  &__save {\n    margin-right: .2rem;\n    font-size: .14rem;\n  }\n}\n.form {\n  padding: 0 .2rem;\n  margin-top: .12rem;\n  background: $bgColor;\n  border-top: .01rem solid $content-bgColor;\n  border-bottom: .01rem solid $content-bgColor;\n  &__item {\n    display: flex;\n    padding: .12rem 0;\n    line-height: .2rem;\n    font-size: .14rem;\n    border-bottom: .01rem solid $content-bgColor;\n    &:last-of-type {\n      border-bottom: none;\n    }\n    &__label {\n      margin-right: .05rem;\n      color: $medium-fontColor;\n    }\n    &__content {\n      flex: 1;\n      border: none;\n      outline: none;\n      color: #3F3F3F;\n      &::placeholder {\n        color: #3F3F3F;\n      }\n    }\n  }\n}\n</style>","import { render } from \"./UpsertAddress.vue?vue&type=template&id=46f86bf1&scoped=true\"\nimport script from \"./UpsertAddress.vue?vue&type=script&lang=js\"\nexport * from \"./UpsertAddress.vue?vue&type=script&lang=js\"\n\nimport \"./UpsertAddress.vue?vue&type=style&index=0&id=46f86bf1&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\VSCode\\\\VS Code File\\\\project\\\\jingdong\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-46f86bf1\"]])\n\nexport default __exports__"],"sourceRoot":""}