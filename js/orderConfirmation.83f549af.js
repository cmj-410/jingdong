(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderConfirmation"],{1148:function(t,e,n){"use strict";var c=n("da84"),r=n("5926"),a=n("577e"),i=n("1d80"),o=c.RangeError;t.exports=function(t){var e=a(i(this)),n="",c=r(t);if(c<0||c==1/0)throw o("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(e+=e))1&c&&(n+=e);return n}},"19e9":function(t,e,n){"use strict";var c=n("1da1"),r=(n("96cf"),n("5502")),a=n("b775"),i=function(){var t=Object(r["b"])(),e=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){var c,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=t.state.addressList,!n&&c.length){e.next=6;break}return e.next=4,Object(a["a"])("/api/user/address");case 4:i=e.sent,null!==i&&void 0!==i&&null!==(r=i.data)&&void 0!==r&&r.length&&t.commit("changeAddressList",i.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getAddressList:e}};e["a"]=i},"3dc5":function(t,e,n){"use strict";n("e798")},"3f98":function(t,e,n){},"408a":function(t,e,n){var c=n("e330");t.exports=c(1..valueOf)},"4bf6":function(t,e,n){},"501c":function(t,e,n){"use strict";n("6aa8")},"6aa8":function(t,e,n){},"75c9":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("b680");var c=n("7a23"),r=n("5502"),a=function(t){var e=Object(r["b"])(),n=e.state.cartList,a=function(t,n,c,r){e.commit("changeCartItemInfo",{shopId:t,productId:n,productInfo:c,num:r})},i=Object(c["b"])((function(){var e,c=(null===(e=n[t])||void 0===e?void 0:e.productList)||{},r={};for(var a in c){var i=c[a];i.count>0&&(r[a]=i)}return r})),o=Object(c["b"])((function(){var e,c=(null===(e=n[t])||void 0===e?void 0:e.shopName)||"";return c})),s=Object(c["b"])((function(){var e,c=null===(e=n[t])||void 0===e?void 0:e.productList,r={total:0,price:0,allChecked:!0};if(c)for(var a in c){var i=c[a];r.total+=i.count,i.check&&(r.price+=i.count*i.price),i.count>0&&!i.check&&(r.allChecked=!1)}return r.price=r.price.toFixed(2),r}));return{cartList:n,shopName:o,productList:i,calculations:s,changeCartItemInfo:a}}},"7db0":function(t,e,n){"use strict";var c=n("23e7"),r=n("b727").find,a=n("44d2"),i="find",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),c({target:"Array",proto:!0,forced:o},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(i)},b680:function(t,e,n){"use strict";var c=n("23e7"),r=n("da84"),a=n("e330"),i=n("5926"),o=n("408a"),s=n("1148"),u=n("d039"),d=r.RangeError,b=r.String,f=Math.floor,l=a(s),_=a("".slice),p=a(1..toFixed),O=function(t,e,n){return 0===e?n:e%2===1?O(t,e-1,n*t):O(t*t,e/2,n)},j=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},v=function(t,e,n){var c=-1,r=n;while(++c<6)r+=e*t[c],t[c]=r%1e7,r=f(r/1e7)},h=function(t,e){var n=6,c=0;while(--n>=0)c+=t[n],t[n]=f(c/e),c=c%e*1e7},m=function(t){var e=6,n="";while(--e>=0)if(""!==n||0===e||0!==t[e]){var c=b(t[e]);n=""===n?c:n+l("0",7-c.length)+c}return n},g=u((function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)}))||!u((function(){p({})}));c({target:"Number",proto:!0,forced:g},{toFixed:function(t){var e,n,c,r,a=o(this),s=i(t),u=[0,0,0,0,0,0],f="",p="0";if(s<0||s>20)throw d("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return b(a);if(a<0&&(f="-",a=-a),a>1e-21)if(e=j(a*O(2,69,1))-69,n=e<0?a*O(2,-e,1):a/O(2,e,1),n*=4503599627370496,e=52-e,e>0){v(u,0,n),c=s;while(c>=7)v(u,1e7,0),c-=7;v(u,O(10,c,1),0),c=e-1;while(c>=23)h(u,1<<23),c-=23;h(u,1<<c),v(u,1,1),h(u,2),p=m(u)}else v(u,0,n),v(u,1<<-e,0),p=m(u)+l("0",s);return s>0?(r=p.length,p=f+(r<=s?"0."+l("0",s-r)+p:_(p,0,r-s)+"."+_(p,r-s))):p=f+p,p}})},b957:function(t,e,n){"use strict";n.r(e);var c=n("7a23"),r={class:"wrapper"};function a(t,e,n,a,i,o){var s=Object(c["A"])("TopArea"),u=Object(c["A"])("ProductList"),d=Object(c["A"])("Order");return Object(c["t"])(),Object(c["f"])("div",r,[Object(c["j"])(s),Object(c["j"])(u),Object(c["j"])(d)])}var i=n("19e9"),o=(n("b0c0"),function(t){return Object(c["w"])("data-v-275476f1"),t=t(),Object(c["u"])(),t}),s={class:"top"},u={class:"top__header"},d=Object(c["i"])(" 确认订单 "),b={class:"top__receiver"},f=o((function(){return Object(c["g"])("div",{class:"top__receiver__title"},"收货地址",-1)})),l={class:"top__receiver__address"},_={class:"top__receiver__info"},p={class:"top__receiver__info__name"},O={class:"top__receiver__info__name"},j=o((function(){return Object(c["g"])("div",{class:"iconfont top__receiver__icon"},"",-1)})),v={key:1},h=o((function(){return Object(c["g"])("div",{class:"top__receiver__address"}," 暂无可用地址 ",-1)})),m=[h];function g(t,e,n,r,a,i){return Object(c["t"])(),Object(c["f"])("div",s,[Object(c["g"])("div",u,[Object(c["g"])("div",{class:"iconfont top__header__back",onClick:e[0]||(e[0]=function(){return r.handleBackClick&&r.handleBackClick.apply(r,arguments)})},""),d]),Object(c["g"])("div",b,[f,r.address?(Object(c["t"])(),Object(c["f"])("div",{key:0,onClick:e[1]||(e[1]=function(){return r.handleAddressClick&&r.handleAddressClick.apply(r,arguments)})},[Object(c["g"])("div",l,Object(c["C"])(r.address.city)+Object(c["C"])(r.address.department)+Object(c["C"])(r.address.houseNumber),1),Object(c["g"])("div",_,[Object(c["g"])("span",p,Object(c["C"])(r.address.name),1),Object(c["g"])("span",O,Object(c["C"])(r.address.phone),1)]),j])):(Object(c["t"])(),Object(c["f"])("div",v,m))])])}var C=n("6c02"),k=(n("7db0"),n("d3b7"),n("5502")),w=function(){var t=Object(C["c"])(),e=t.params.addressId,n=Object(c["b"])((function(){var t=Object(k["b"])(),n=t.state.addressList;return n.find((function(t){return t._id===e}))||n[0]}));return n},L=w,A={name:"TopArea",setup:function(){var t=Object(C["d"])(),e=Object(C["c"])(),n=e.params.id,c=function(){t.back()},r=function(){t.push("/chooseAddressList/".concat(n))},a=L();return{handleBackClick:c,handleAddressClick:r,address:a}}},I=(n("501c"),n("6b0d")),x=n.n(I);const y=x()(A,[["render",g],["__scopeId","data-v-275476f1"]]);var N=y,R=(n("b680"),function(t){return Object(c["w"])("data-v-51236a8a"),t=t(),Object(c["u"])(),t}),S={class:"products"},F={class:"products__title"},B={class:"products__wrapper"},P={class:"products__list"},T=["src"],E={class:"products__item__detail"},J={class:"products__item__title"},z={class:"products__item__price"},D=R((function(){return Object(c["g"])("span",{class:"products__item__yen"},"¥ ",-1)})),G={class:"products__item__total"},K=R((function(){return Object(c["g"])("span",{class:"products__item__yen"},"¥ ",-1)}));function M(t,e,n,r,a,i){return Object(c["t"])(),Object(c["f"])("div",S,[Object(c["g"])("div",F,Object(c["C"])(r.shopName),1),Object(c["g"])("div",B,[Object(c["g"])("div",P,[(Object(c["t"])(!0),Object(c["f"])(c["a"],null,Object(c["z"])(r.productList,(function(t){return Object(c["t"])(),Object(c["f"])("div",{key:t._id,class:"products__item"},[Object(c["g"])("img",{class:"products__item__img",src:t.imgUrl},null,8,T),Object(c["g"])("div",E,[Object(c["g"])("h4",J,Object(c["C"])(t.name),1),Object(c["g"])("p",z,[Object(c["g"])("span",null,[D,Object(c["i"])(" "+Object(c["C"])(t.price)+" x "+Object(c["C"])(t.count),1)]),Object(c["g"])("span",G,[K,Object(c["i"])(" "+Object(c["C"])((t.price*t.count).toFixed(2)),1)])])])])})),128))])])])}var U=n("75c9"),W={name:"ProductList",setup:function(){var t=Object(C["c"])(),e=t.params.id,n=Object(U["a"])(e),c=n.shopName,r=n.productList;return{shopName:c,productList:r}}};n("f901");const q=x()(W,[["render",M],["__scopeId","data-v-51236a8a"]]);var H=q,Q=function(t){return Object(c["w"])("data-v-13c85c26"),t=t(),Object(c["u"])(),t},V={class:"order"},X={class:"order__price"},Y=Object(c["i"])("实付金额 "),Z=Q((function(){return Object(c["g"])("h3",{class:"mask__content__title"},"确认要离开收银台？",-1)})),$=Q((function(){return Object(c["g"])("p",{class:"mask__content__desc"},"请尽快完成支付，否则将被取消",-1)})),tt={class:"mask__content__btns"};function et(t,e,n,r,a,i){return Object(c["t"])(),Object(c["f"])(c["a"],null,[Object(c["g"])("div",V,[Object(c["g"])("div",X,[Y,Object(c["g"])("b",null,"¥"+Object(c["C"])(r.calculations.price),1)]),r.address?(Object(c["t"])(),Object(c["f"])("div",{key:0,class:"order__btn",onClick:e[0]||(e[0]=function(){return r.handleShowConfirmChange(!0)})},"提交订单")):Object(c["e"])("",!0)]),Object(c["K"])(Object(c["g"])("div",{class:"mask",onClick:e[4]||(e[4]=function(){return r.handleShowConfirmChange(!1)})},[Object(c["g"])("div",{class:"mask__content",onClick:e[3]||(e[3]=Object(c["L"])((function(){}),["stop"]))},[Z,$,Object(c["g"])("div",tt,[Object(c["g"])("div",{class:"mask__content__btn mask__content__btn--first",onClick:e[1]||(e[1]=function(){return r.handleConfirmOrder(!0)})},"取消订单"),Object(c["g"])("div",{class:"mask__content__btn mask__content__btn--last",onClick:e[2]||(e[2]=function(){return r.handleConfirmOrder(!1)})},"确认支付")])])],512),[[c["G"],r.showConfirm]])],64)}var nt=n("1da1"),ct=(n("96cf"),n("b775")),rt=function(t,e,n,c){var r=Object(C["d"])(),a=Object(k["b"])(),i=function(){var i=Object(nt["a"])(regeneratorRuntime.mark((function i(o){var s,u,d,b;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:for(u in s=[],n.value)d=n.value[u],s.push({id:d._id,num:d.count});return i.prev=2,i.next=5,Object(ct["c"])("/api/order",{addressId:c.value._id,shopId:t,shopName:e.value,isCanceled:o,products:s});case 5:b=i.sent,0===(null===b||void 0===b?void 0:b.errno)&&(a.commit("clearCartData11",t),r.push({name:"OrderList"})),i.next=11;break;case 9:i.prev=9,i.t0=i["catch"](2);case 11:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(t){return i.apply(this,arguments)}}();return{handleConfirmOrder:i}},at=function(){var t=Object(c["y"])(!1),e=function(e){t.value=e};return{showConfirm:t,handleShowConfirmChange:e}},it={name:"Order",setup:function(){var t=Object(C["c"])(),e=t.params.id,n=L(),c=Object(U["a"])(e),r=c.calculations,a=c.shopName,i=c.productList,o=rt(e,a,i,n),s=o.handleConfirmOrder,u=at(),d=u.showConfirm,b=u.handleShowConfirmChange;return{address:n,showConfirm:d,handleShowConfirmChange:b,calculations:r,handleConfirmOrder:s}}};n("3dc5");const ot=x()(it,[["render",et],["__scopeId","data-v-13c85c26"]]);var st=ot,ut={name:"OrderConfirmation",components:{TopArea:N,ProductList:H,Order:st},setup:function(){var t=Object(i["a"])(),e=t.getAddressList;e()}};n("d9a2");const dt=x()(ut,[["render",a],["__scopeId","data-v-1bad0ca6"]]);e["default"]=dt},d9a2:function(t,e,n){"use strict";n("3f98")},e798:function(t,e,n){},f901:function(t,e,n){"use strict";n("4bf6")}}]);
//# sourceMappingURL=orderConfirmation.83f549af.js.map